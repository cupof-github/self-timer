!function(t){function e(){}function r(t,e){return function(){t.apply(e,arguments)}}function n(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],c(t,this)}function o(t,e){for(;3===t._state;)t=t._value;return 0===t._state?void t._deferreds.push(e):(t._handled=!0,void n._immediateFn(function(){var r=1===t._state?e.onFulfilled:e.onRejected;if(null===r)return void(1===t._state?i:u)(e.promise,t._value);var n;try{n=r(t._value)}catch(t){return void u(e.promise,t)}i(e.promise,n)}))}function i(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var o=e.then;if(e instanceof n)return t._state=3,t._value=e,void a(t);if("function"==typeof o)return void c(r(o,e),t)}t._state=1,t._value=e,a(t)}catch(e){u(t,e)}}function u(t,e){t._state=2,t._value=e,a(t)}function a(t){2===t._state&&0===t._deferreds.length&&n._immediateFn(function(){t._handled||n._unhandledRejectionFn(t._value)});for(var e=0,r=t._deferreds.length;e<r;e++)o(t,t._deferreds[e]);t._deferreds=null}function s(t,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=r}function c(t,e){var r=!1;try{t(function(t){r||(r=!0,i(e,t))},function(t){r||(r=!0,u(e,t))})}catch(t){if(r)return;r=!0,u(e,t)}}var f=setTimeout;n.prototype.catch=function(t){return this.then(null,t)},n.prototype.then=function(t,r){var n=new this.constructor(e);return o(this,new s(t,r,n)),n},n.all=function(t){var e=Array.prototype.slice.call(t);return new n(function(t,r){function n(i,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var a=u.then;if("function"==typeof a)return void a.call(u,function(t){n(i,t)},r)}e[i]=u,0===--o&&t(e)}catch(t){r(t)}}if(0===e.length)return t([]);for(var o=e.length,i=0;i<e.length;i++)n(i,e[i])})},n.resolve=function(t){return t&&"object"==typeof t&&t.constructor===n?t:new n(function(e){e(t)})},n.reject=function(t){return new n(function(e,r){r(t)})},n.race=function(t){return new n(function(e,r){for(var n=0,o=t.length;n<o;n++)t[n].then(e,r)})},n._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){f(t,0)},n._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},n._setImmediateFn=function(t){n._immediateFn=t},n._setUnhandledRejectionFn=function(t){n._unhandledRejectionFn=t},"undefined"!=typeof module&&module.exports?module.exports=n:t.Promise||(t.Promise=n)}(this),function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.SelfTimer=e()}(this,function(){"use strict";function t(t){this.D=t}return t.prototype.helpers=function(){var t=this.D,e=(this.D.getDay(),function(t){return"function"==typeof t||void 0==t}),r=function(t,e){for(var r=t.length;r--;)if(t[r]===e)return!0;return!1},n=function(t){return t.map(function(t){return t.replace(/Sun/g,0)}).map(function(t){return t.replace(/Mon/g,1)}).map(function(t){return t.replace(/Tue/g,2)}).map(function(t){return t.replace(/Wed/g,3)}).map(function(t){return t.replace(/Thu/g,4)}).map(function(t){return t.replace(/Fri/g,5)}).map(function(t){return t.replace(/Sat/g,6)}).map(function(t){return parseInt(t)})},o=function(t){var e=t.split(/:|\s/),r=new Date;return"pm"==e.pop().toLowerCase()&&(e[0]=+e[0]+12),r.setHours(+e.shift()),r.setMinutes(+e.shift()),r},i=function(t,e){1==arguments.length&&(e=t,t=0);for(var r=[],n=0;n<e;n++)r.push(t-n);return r},u=function(t,e,r){return r<e.setDate(e.getDate()+1)&&r>t},a=function(){var e=t.getMonth()+1,r=t.getDate();return e.length<2&&(e="0"+e),r.length<2&&(r="0"+r),[e,r].join("-")},s=function(t){var e;switch(t){case"s":case"sec":case"second":case"seconds":e=1e3;break;case"m":case"min":case"minute":case"minutes":e=6e4;break;default:e=!1}return e},c=function(){return"undefined"===navigator.userLanguage?navigator.userLanguage:navigator.language},f={__checkIsValid:e,__contains:r,__dayOfTheWeekStringToNumber:n,__timeObject:o,__range:i,__dateCompare:u,__dateString:a,__typeToMilliseconds:s,__detectLang:c};return f},t.prototype.messages=function(t){return{day:"Error: A day should be less than 31",month:"Error: month should be untll 12",date:"Error: date format shoud be MM-DD",year:"Error: date format shoud be 20YY",monthBetween:"Error: start of month should be less than end of month",startHour:"Error: start hour should be less than 23",endHour:"Error: end hour should be until 23",hourFormat:"Error: hours should be numberic",isNotValidHour:"Error: hour should be until 23",startDay:"Error: start day should be less than 30",endDay:"Error: end day should be untill 31",time:"Error: invalid time format. time should be [hh:mm AM or PM]",isNotArray:"Error: first argument shold be Array",dateGrater:"start date should not be grater than end-of -date",dateSameDay:"start and end date are should not be same date ",timeFormat:"Error: time of type formats",numFormat:"Error: num should be numberic",taskFormat:"Error: "+t+" should be object or function",notExist:"Error: "+t+" not exist",shouldBeFunction:"Error: "+t+" is shold be function"}},t.prototype.formats=function(){return{date:/^(1[0-2]|[1-9])-([1-9]|[12]\d|3[0-1])$/,year:/^[2][0][1-9]{2}$/,annual:/^[2]{1}[0]{1}[1-3]{1}[0-9]{1}-[01]{1}[0-9]{1}-[0-3]{1}[0-9]{1}$/,time:/^(0?[1-9]|1[012])(:[0-5]\d) [APap][mM]$/}},t.prototype.on=function(t){var e=t,r=this.D,n=this.D.getDay(),o=this.messages(),i=this.helpers(),u=this.formats(),a=function(){return new Promise(function(t,r){return 0===n?t(!0):e===!0&&r(!1)})},s=function(){return new Promise(function(t,r){return 1===n?t(!0):e===!0&&r(!1)})},c=function(){return new Promise(function(t,r){return 2===n?t(!0):e===!0&&r(!1)})},f=function(){return new Promise(function(t,r){return 3===n?t(!0):e===!0&&r(!1)})},h=function(){return new Promise(function(t,r){return 4===n?t(!0):e===!0&&r(!1)})},d=function(){return new Promise(function(t,r){return 5===n?t(!0):e===!0&&r(!1)})},m=function(){return new Promise(function(t,r){return 6===n?t(!0):e===!0&&r(!1)})},l=function(t){return new Promise(function(r,u){try{if(!Array.isArray(t))throw o.isNotArray;var a=i.__dayOfTheWeekStringToNumber(t);return i.__contains(a,n)?r(!0):e===!0&&u(!1)}catch(t){return void console.error(t)}})},y=function(){return new Promise(function(t,r){var o=[1,2,3,4,5];return i.__contains(o,n)?t(!0):e===!0&&r(!1)})},p=function(){return new Promise(function(t,r){var o=[0,6];return i.__contains(o,n)?t(!0):e===!0&&r(!1)})},_=function(t){return new Promise(function(r,n){try{if(!t.match(u.date))throw o.date;return t==i.__dateString()?r(!0):e===!0&&n(!1)}catch(t){return void console.error(t)}})},v=function(t,n){return new Promise(function(u,a){var s=new Date(t),c=new Date(n);try{if(s>c)throw o.dateGrater;if(s==c)throw o.dateSameDay;return i.__dateCompare(s,c,r)?u(!0):e===!0&&a(!1)}catch(t){return void console.error(t)}})},w=function(t){return new Promise(function(n,u){try{if(!Array.isArray(t))throw o.isNotArray;return i.__contains(t,r.toISOString().slice(0,10))?n(!0):e===!0&&u(!1)}catch(t){return void console.error(t)}})},g={Sunday:a,Monday:s,Tuesday:c,Wednesday:f,Thursday:h,Friday:d,Saturday:m,Selects:l,Weekdays:y,Weekend:p,Annual:_,DatesBetween:v,DatesContain:w};return g},t.prototype.at=function(t){var e=t,r=this.D,n=(this.D.getDay(),this.D.getHours()),o=this.messages(),i=this.helpers(),u=this.formats(),a=function(t,n){return new Promise(function(a,s){try{if(!t.match(u.time))throw o.time+"at start";if(!n.match(u.time))throw o.time+" at end";var c=r<i.__timeObject(n)&&r>i.__timeObject(t);return c?a(!0):e===!0&&s(!1)}catch(t){return void console.error(t)}})},s=function(t,n){return new Promise(function(a,s){try{if(!t.match(u.time))throw o.time+"at start";if(!n.match(u.time))throw o.time+" at end";var c=r<i.__timeObject(n)&&r>i.__timeObject(t);return c?e===!0&&s(!1):a(!0)}catch(t){return void console.error(t)}})},c=function(t){return new Promise(function(r,i){var u=parseInt(t);try{if(u>23)throw o.startHour;return u===n?r(!0):e===!0&&i(!1)}catch(t){return void console.error(t)}})},f=function(t,r){return new Promise(function(u,a){var s=parseInt(t),c=parseInt(r);try{if(s>23)throw o.startHour;if(c>23)throw o.endHour;var f=i.__range(c,c-s);return f.push(t),i.__contains(f,n)?u(!0):e===!0&&a(!1)}catch(t){return void console.error(t)}})},h=function(t,r){return new Promise(function(r,u){try{if(!Array.isArray(t))throw o.isNotArray;if(1!=!t.some(isNaN))throw o.hourFormat;var a=t.map(function(t){return parseInt(t)});return a.map(function(t){if(t>23)throw o.isNotValidHour}),i.__contains(a,n)?r(!0):e===!0&&u(!1)}catch(t){return void console.error(t)}})},d={Between:a,Unless:s,Hour:c,HoursBetween:f,HourSelects:h};return d},t.prototype.in=function(t){var e=t,r=this.messages(),n=this.helpers(),o=this.formats(),i=(this.D,this.D.getDate()),u=this.D.getMonth()+1,a=this.D.getFullYear(),s=function(t){return new Promise(function(r,n){try{if(parseInt(t)>31)throw __message.day;return t==i?r(!0):e===!0&&n(!1)}catch(t){return void console.error(t)}})},c=function(t){return new Promise(function(o,u){try{if(!Array.isArray(t))throw r.isNotArray;var a=t.map(function(t){return parseInt(t)});return n.__contains(a,i)?o(!0):e===!0&&u(!1)}catch(t){return void console.error(t)}})},f=function(t,o){return new Promise(function(u,a){try{var s=parseInt(t),c=parseInt(o);if(s>30)throw r.startDay;if(c>31)throw r.endDay;var f=n.__range(c,c-s);return f.push(t),n.__contains(f,i)?u(!0):e===!0&&a(!1)}catch(t){return void console.error(t)}})},h=function(t){return new Promise(function(n,o){try{if(parseInt(t)>12)throw r.month;var i=t<10?"0"+t:t;return i==u?n(!0):e===!0&&o(!1)}catch(t){return void console.error(t)}})},d=function(t){return new Promise(function(o,i){try{if(!Array.isArray(t))throw r.isNotArray;return n.__contains(t,u)?o(!0):e===!0&&i(!1)}catch(t){return void console.error(t)}})},m=function(t){return new Promise(function(n,i){try{if(!t.toString().match(o.year))throw r.year;return t==a?n(!0):e===!0&&i(!1)}catch(t){return void console.error(t)}})},l={Day:s,Days:c,DaysBetween:f,Month:h,MonthSelects:d,Year:m};return l},t.prototype.is=function(t){var e=t,r=function(t){return new Promise(function(r,n){return t?r(!0):e===!0&&n(!1)})},n=function(t){return new Promise(function(r,n){return t?e===!0&&n(!1):r(!0)})},o=function(t){return new Promise(function(r,n){var o="undefined"===navigator.userLanguage?navigator.userLanguage:navigator.language;return t==o?r(!0):e===!0&&n(!1)})},i=function(t){return new Promise(function(r,n){var o="undefined"===navigator.userLanguage?navigator.userLanguage:navigator.language;return t==o.slice(0,2)?r(!0):e===!0&&n(!1)})},u={True:r,False:n,Language:o,Lang:i};return u},t.prototype.timer=function(){var t=this.messages(),e=this.helpers(),r=function(r,n,o){return new Promise(function(i){var u=e.__typeToMilliseconds(r),a=typeof o;try{if(!u)throw t.timeFormat;if(isNaN(n))throw t.numFormat;if(0===n||"0"===n)throw t.numFormat;if(!e.__contains(["object","function","undefined"],a))throw this.messages("type").taskFormat;if("object"===a){if(!("before"in o))throw this.messages("key:before").notExist;if("function"!=typeof o.before)throw this.messages("before").shouldBeFunction;return o.before(),setTimeout(function(){return i(!0)},n*u)}return setTimeout(function(){return i(!0)},n*u)}catch(t){return void console.error(t)}})},n={After:r};return n},t});