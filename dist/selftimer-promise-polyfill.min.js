!function(t){function r(){}function e(t,r){return function(){t.apply(r,arguments)}}function n(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],c(t,this)}function o(t,r){for(;3===t._state;)t=t._value;return 0===t._state?void t._deferreds.push(r):(t._handled=!0,void n._immediateFn(function(){var e=1===t._state?r.onFulfilled:r.onRejected;if(null===e)return void(1===t._state?i:u)(r.promise,t._value);var n;try{n=e(t._value)}catch(t){return void u(r.promise,t)}i(r.promise,n)}))}function i(t,r){try{if(r===t)throw new TypeError("A promise cannot be resolved with itself.");if(r&&("object"==typeof r||"function"==typeof r)){var o=r.then;if(r instanceof n)return t._state=3,t._value=r,void s(t);if("function"==typeof o)return void c(e(o,r),t)}t._state=1,t._value=r,s(t)}catch(r){u(t,r)}}function u(t,r){t._state=2,t._value=r,s(t)}function s(t){2===t._state&&0===t._deferreds.length&&n._immediateFn(function(){t._handled||n._unhandledRejectionFn(t._value)});for(var r=0,e=t._deferreds.length;r<e;r++)o(t,t._deferreds[r]);t._deferreds=null}function a(t,r,e){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof r?r:null,this.promise=e}function c(t,r){var e=!1;try{t(function(t){e||(e=!0,i(r,t))},function(t){e||(e=!0,u(r,t))})}catch(t){if(e)return;e=!0,u(r,t)}}var f=setTimeout;n.prototype.catch=function(t){return this.then(null,t)},n.prototype.then=function(t,e){var n=new this.constructor(r);return o(this,new a(t,e,n)),n},n.all=function(t){var r=Array.prototype.slice.call(t);return new n(function(t,e){function n(i,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var s=u.then;if("function"==typeof s)return void s.call(u,function(t){n(i,t)},e)}r[i]=u,0===--o&&t(r)}catch(t){e(t)}}if(0===r.length)return t([]);for(var o=r.length,i=0;i<r.length;i++)n(i,r[i])})},n.resolve=function(t){return t&&"object"==typeof t&&t.constructor===n?t:new n(function(r){r(t)})},n.reject=function(t){return new n(function(r,e){e(t)})},n.race=function(t){return new n(function(r,e){for(var n=0,o=t.length;n<o;n++)t[n].then(r,e)})},n._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){f(t,0)},n._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},n._setImmediateFn=function(t){n._immediateFn=t},n._setUnhandledRejectionFn=function(t){n._unhandledRejectionFn=t},"undefined"!=typeof module&&module.exports?module.exports=n:t.Promise||(t.Promise=n)}(this),function(t,r){"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?module.exports=r():t.SelfTimer=r()}(this,function(){"use strict";function t(t){this.D=t}return t.prototype.helpers=function(){var t=this.D,r=(this.D.getDay(),function(t){return"function"==typeof t||void 0==t}),e=function(t,r){for(var e=t.length;e--;)if(t[e]===r)return!0;return!1},n=function(t){return t.map(function(t){return t.replace(/Sun/g,0)}).map(function(t){return t.replace(/Mon/g,1)}).map(function(t){return t.replace(/Tue/g,2)}).map(function(t){return t.replace(/Wed/g,3)}).map(function(t){return t.replace(/Thu/g,4)}).map(function(t){return t.replace(/Fri/g,5)}).map(function(t){return t.replace(/Sat/g,6)}).map(function(t){return parseInt(t)})},o=function(t){var r=t.split(/:|\s/),e=new Date;return"pm"==r.pop().toLowerCase()&&(r[0]=+r[0]+12),e.setHours(+r.shift()),e.setMinutes(+r.shift()),e},i=function(t,r){1==arguments.length&&(r=t,t=0);for(var e=[],n=0;n<r;n++)e.push(t-n);return e},u=function(t,r,e){return e<r.setDate(r.getDate()+1)&&e>t},s=function(){var r=t.getMonth()+1,e=t.getDate();return r.length<2&&(r="0"+r),e.length<2&&(e="0"+e),[r,e].join("-")},a=function(t){var r;switch(t){case"s":case"sec":case"second":case"seconds":r=1e3;break;case"m":case"min":case"minute":case"minutes":r=6e4;break;default:r=!1}return r},c=function(){return"undefined"===navigator.userLanguage?navigator.userLanguage:navigator.language},f={__checkIsValid:r,__contains:e,__dayOfTheWeekStringToNumber:n,__timeObject:o,__range:i,__dateCompare:u,__dateString:s,__typeToMilliseconds:a,__detectLang:c};return f},t.prototype.messages=function(t){return{day:"Error: A day should be less than 31",month:"Error: month should be untll 12",date:"Error: date format shoud be MM-DD",year:"Error: date format shoud be 20YY",monthBetween:"Error: start of month should be less than end of month",startHour:"Error: start hour should be less than 23",endHour:"Error: end hour should be until 23",hourFormat:"Error: hours should be numberic",isNotValidHour:"Error: hour should be until 23",startDay:"Error: start day should be less than 30",endDay:"Error: end day should be untill 31",time:"Error: invalid time format. time should be [hh:mm AM or PM]",isNotArray:"Error: first argument shold be Array",dateGrater:"start date should not be grater than end-of -date",dateSameDay:"start and end date are should not be same date ",timeFormat:"Error: time of type formats",numFormat:"Error: num should be numberic",taskFormat:"Error: "+t+" should be object or function",notExist:"Error: "+t+" not exist",shouldBeFunction:"Error: "+t+" is shold be function",onlyBrowser:"Error: "+t+" is just supported web-browser"}},t.prototype.formats=function(){return{date:/^(1[0-2]|[1-9])-([1-9]|[12]\d|3[0-1])$/,year:/^[2][0][1-9]{2}$/,annual:/^[2]{1}[0]{1}[1-3]{1}[0-9]{1}-[01]{1}[0-9]{1}-[0-3]{1}[0-9]{1}$/,time:/^(0?[1-9]|1[012])(:[0-5]\d) [APap][mM]$/}},t.prototype.on=function(t){var r=t,e=this.D,n=this.D.getDay(),o=this.messages(),i=this.helpers(),u=this.formats(),s=function(){return new Promise(function(t,e){return 0===n?t(!0):r===!0&&e(!1)})},a=function(){return new Promise(function(t,e){return 1===n?t(!0):r===!0&&e(!1)})},c=function(){return new Promise(function(t,e){return 2===n?t(!0):r===!0&&e(!1)})},f=function(){return new Promise(function(t,e){return 3===n?t(!0):r===!0&&e(!1)})},h=function(){return new Promise(function(t,e){return 4===n?t(!0):r===!0&&e(!1)})},d=function(){return new Promise(function(t,e){return 5===n?t(!0):r===!0&&e(!1)})},l=function(){return new Promise(function(t,e){return 6===n?t(!0):r===!0&&e(!1)})},m=function(t){return new Promise(function(e,u){try{if(!Array.isArray(t))throw o.isNotArray;var s=i.__dayOfTheWeekStringToNumber(t);return i.__contains(s,n)?e(!0):r===!0&&u(!1)}catch(t){return void console.error(t)}})},y=function(){return new Promise(function(t,e){var o=[1,2,3,4,5];return i.__contains(o,n)?t(!0):r===!0&&e(!1)})},_=function(){return new Promise(function(t,e){var o=[0,6];return i.__contains(o,n)?t(!0):r===!0&&e(!1)})},w=function(t){return new Promise(function(e,n){try{if(!t.match(u.date))throw o.date;return t==i.__dateString()?e(!0):r===!0&&n(!1)}catch(t){return void console.error(t)}})},p=function(t,n){return new Promise(function(u,s){var a=new Date(t),c=new Date(n);try{if(a>c)throw o.dateGrater;if(a==c)throw o.dateSameDay;return i.__dateCompare(a,c,e)?u(!0):r===!0&&s(!1)}catch(t){return void console.error(t)}})},g=function(t){return new Promise(function(n,u){try{if(!Array.isArray(t))throw o.isNotArray;return i.__contains(t,e.toISOString().slice(0,10))?n(!0):r===!0&&u(!1)}catch(t){return void console.error(t)}})},v={Sunday:s,Monday:a,Tuesday:c,Wednesday:f,Thursday:h,Friday:d,Saturday:l,Selects:m,Weekdays:y,Weekend:_,Annual:w,DatesBetween:p,DatesContain:g};return v},t.prototype.at=function(t){var r=t,e=this.D,n=(this.D.getDay(),this.D.getHours()),o=this.messages(),i=this.helpers(),u=this.formats(),s=function(t,n){return new Promise(function(s,a){try{if(!t.match(u.time))throw o.time+"at start";if(!n.match(u.time))throw o.time+" at end";var c=e<i.__timeObject(n)&&e>i.__timeObject(t);return c?s(!0):r===!0&&a(!1)}catch(t){return void console.error(t)}})},a=function(t,n){return new Promise(function(s,a){try{if(!t.match(u.time))throw o.time+"at start";if(!n.match(u.time))throw o.time+" at end";var c=e<i.__timeObject(n)&&e>i.__timeObject(t);return c?r===!0&&a(!1):s(!0)}catch(t){return void console.error(t)}})},c=function(t){return new Promise(function(e,i){var u=parseInt(t);try{if(u>23)throw o.startHour;return u===n?e(!0):r===!0&&i(!1)}catch(t){return void console.error(t)}})},f=function(t,e){return new Promise(function(u,s){var a=parseInt(t),c=parseInt(e);try{if(a>23)throw o.startHour;if(c>23)throw o.endHour;var f=i.__range(c,c-a);return f.push(t),i.__contains(f,n)?u(!0):r===!0&&s(!1)}catch(t){return void console.error(t)}})},h=function(t,e){return new Promise(function(e,u){try{if(!Array.isArray(t))throw o.isNotArray;if(1!=!t.some(isNaN))throw o.hourFormat;var s=t.map(function(t){return parseInt(t)});return s.map(function(t){if(t>23)throw o.isNotValidHour}),i.__contains(s,n)?e(!0):r===!0&&u(!1)}catch(t){return void console.error(t)}})},d={Between:s,Unless:a,Hour:c,HoursBetween:f,HourSelects:h};return d},t.prototype.in=function(t){var r=t,e=this.messages(),n=this.helpers(),o=this.formats(),i=(this.D,this.D.getDate()),u=this.D.getMonth()+1,s=this.D.getFullYear(),a=function(t){return new Promise(function(e,n){try{if(parseInt(t)>31)throw __message.day;return t==i?e(!0):r===!0&&n(!1)}catch(t){return void console.error(t)}})},c=function(t){return new Promise(function(o,u){try{if(!Array.isArray(t))throw e.isNotArray;var s=t.map(function(t){return parseInt(t)});return n.__contains(s,i)?o(!0):r===!0&&u(!1)}catch(t){return void console.error(t)}})},f=function(t,o){return new Promise(function(u,s){try{var a=parseInt(t),c=parseInt(o);if(a>30)throw e.startDay;if(c>31)throw e.endDay;var f=n.__range(c,c-a);return f.push(t),n.__contains(f,i)?u(!0):r===!0&&s(!1)}catch(t){return void console.error(t)}})},h=function(t){return new Promise(function(n,o){try{if(parseInt(t)>12)throw e.month;var i=t<10?"0"+t:t;return i==u?n(!0):r===!0&&o(!1)}catch(t){return void console.error(t)}})},d=function(t){return new Promise(function(o,i){try{if(!Array.isArray(t))throw e.isNotArray;return n.__contains(t,u)?o(!0):r===!0&&i(!1)}catch(t){return void console.error(t)}})},l=function(t){return new Promise(function(n,i){try{if(!t.toString().match(o.year))throw e.year;return t==s?n(!0):r===!0&&i(!1)}catch(t){return void console.error(t)}})},m={Day:a,Days:c,DaysBetween:f,Month:h,MonthSelects:d,Year:l};return m},t.prototype.is=function(t){var r=t,e=this.helpers(),n=this.messages(),o=function(t){return new Promise(function(e,n){return t?e(!0):r===!0&&n(!1)})},i=function(t){return new Promise(function(e,n){return t?r===!0&&n(!1):e(!0)})},u=function(t){return new Promise(function(n,o){try{if("undefined"===window)throw this.messages("Language").onlyBrowser;return t==e.__detectLang()?n(!0):r===!0&&o(!1)}catch(t){return void console.error(t)}})},s=function(t){return new Promise(function(n,o){try{if("undefined"===window)throw this.messages("Language").onlyBrowser;var i=e.__detectLang();return t==i.slice(0,2)?n(!0):r===!0&&o(!1)}catch(t){return void console.error(t)}})},a=function(t){return new Promise(function(o,i){try{if("undefined"===window)throw this.messages("LanguageSelects").onlyBrowser;if(!Array.isArray(t))throw n.isNotArray;return e.__contains(t,e.__detectLang())?o(!0):r===!0&&i(!1)}catch(t){return void console.error(t)}})},c=function(t){try{if("undefined"===window)throw this.messages("LangSelects").onlyBrowser;if(!Array.isArray(t))throw n.isNotArray;var o=e.__detectLang();return e.__contains(t,o.slice(0,2))?resolve(!0):r===!0&&reject(!1)}catch(t){return void console.error(t)}},f=function(t){try{if("undefined"===window)throw this.messages("LanguageExcepts").onlyBrowser;if(!Array.isArray(t))throw n.isNotArray;return e.__contains(t,e.__detectLang())?r===!0&&reject(!1):resolve(!0)}catch(t){return void console.error(t)}},h=function(t){try{if("undefined"===window)throw this.messages("LangExcepts").onlyBrowser;if(!Array.isArray(t))throw n.isNotArray;var o=e.__detectLang();return e.__contains(t,o.slice(0,2))?r===!0&&reject(!1):resolve(!0)}catch(t){return void console.error(t)}},d={True:o,False:i,Language:u,Lang:s,LanguageSelects:a,LangSelects:c,LanguageExcepts:f,LangExcepts:h};return d},t.prototype.timer=function(){var t=this.messages(),r=this.helpers(),e=function(e,n,o){return new Promise(function(i){var u=r.__typeToMilliseconds(e),s=typeof o;try{if(!u)throw t.timeFormat;if(isNaN(n))throw t.numFormat;if(0===n||"0"===n)throw t.numFormat;if(!r.__contains(["object","function","undefined"],s))throw this.messages("type").taskFormat;if("object"===s){if(!("before"in o))throw this.messages("key:before").notExist;if("function"!=typeof o.before)throw this.messages("before").shouldBeFunction;return o.before(),setTimeout(function(){return i(!0)},n*u)}return setTimeout(function(){return i(!0)},n*u)}catch(t){return void console.error(t)}})},n={After:e};return n},t});