!function(r,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():r.SelfTimer=e()}(this,function(){"use strict";function r(r){if("undefined"==typeof r)this.D=new Date;else{if(r instanceof Date==!1)return void console.error("'date' must be Date type.");this.D=r}}return r.prototype.helpers=function(){var r=this.D,e=(this.D.getDay(),function(r){return"function"==typeof r||void 0==r}),t=function(r,e){for(var t=r.length;t--;)if(r[t]===e)return!0;return!1},n=function(r,e){var t=!1;return r.indexOf(e)>=0&&(t=!0),t},o=function(r){return r.map(function(r){return r.replace(/Sun/g,0)}).map(function(r){return r.replace(/Mon/g,1)}).map(function(r){return r.replace(/Tue/g,2)}).map(function(r){return r.replace(/Wed/g,3)}).map(function(r){return r.replace(/Thu/g,4)}).map(function(r){return r.replace(/Fri/g,5)}).map(function(r){return r.replace(/Sat/g,6)}).map(function(r){return parseInt(r)})},i=function(r){var e=r.split(/:|\s/),t=new Date;return"pm"==e.pop().toLowerCase()&&(e[0]=+e[0]+12),t.setHours(+e.shift()),t.setMinutes(+e.shift()),t},a=function(r,e){1==arguments.length&&(e=r,r=0);for(var t=[],n=0;n<e;n++)t.push(r-n);return t},s=function(r,e,t){return t<e.setDate(e.getDate()+1)&&t>r},u=function(){var e=r.getMonth()+1,t=r.getDate();return e.length<2&&(e="0"+e),t.length<2&&(t="0"+t),[e,t].join("-")},c=function(r){var e;switch(r){case"s":case"sec":case"second":case"seconds":e=1e3;break;case"m":case"min":case"minute":case"minutes":e=6e4;break;default:e=!1}return e},f=function(){return"undefined"===navigator.userLanguage?navigator.userLanguage.toLowerCase():navigator.language.toLowerCase()},h=function(r){return r.map(function(r){return r.toLowerCase()})},d={__checkIsValid:e,__contains:t,__str_includes:n,__dayOfTheWeekStringToNumber:o,__timeObject:i,__range:a,__dateCompare:s,__dateString:u,__typeToMilliseconds:c,__detectLang:f,__arrayToLower:h};return d},r.prototype.messages=function(r){return{day:"Error: A day should be less than 31",month:"Error: month should be untll 12",date:"Error: date format shoud be MM-DD",year:"Error: date format shoud be 20YY",monthBetween:"Error: start of month should be less than end of month",startHour:"Error: start hour should be less than 23",endHour:"Error: end hour should be until 23",hourFormat:"Error: hours should be numberic",isNotValidHour:"Error: hour should be until 23",startDay:"Error: start day should be less than 30",endDay:"Error: end day should be untill 31",time:"Error: invalid time format. time should be [hh:mm AM or PM]",isNotArray:"Error: first argument shold be Array",dateGrater:"start date should not be grater than end-of -date",dateSameDay:"start and end date are should not be same date ",timeFormat:"Error: time of type formats",numFormat:"Error: num should be numberic",taskFormat:"Error: "+r+" should be object or function",notExist:"Error: "+r+" not exist",shouldBeFunction:"Error: "+r+" is shold be function",onlyBrowser:"Error: "+r+" is just supported web-browser"}},r.prototype.formats=function(){return{date:/^(1[0-2]|[1-9])-([1-9]|[12]\d|3[0-1])$/,year:/^[2][0][1-9]{2}$/,annual:/^[2]{1}[0]{1}[1-3]{1}[0-9]{1}-[01]{1}[0-9]{1}-[0-3]{1}[0-9]{1}$/,time:/^(0?[1-9]|1[012])(:[0-5]\d) [APap][mM]$/}},r.prototype.info=function(){return{version:"1.5.3",method:{on:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Weekdays","Weekend","Selects","Annual","DatesBetween","DatesContain"],at:["Between","Unless","Hour","HoursBetween","HourSelects"],in:["Day","Days","DaysBetween","Month","MonthSelects","Year"],is:["True","False","Language","Lang","LanguageSelects","LangSelects","LanguageExcepts","LangExcepts","Mobile"],timer:["After"]}}},r.prototype.on=function(r){var e=r,t=this.D,n=this.D.getDay(),o=this.messages(),i=this.helpers(),a=this.formats(),s=function(){return new Promise(function(r,t){return 0===n?r(!0):e===!0&&t(!1)})},u=function(){return new Promise(function(r,t){return 1===n?r(!0):e===!0&&t(!1)})},c=function(){return new Promise(function(r,t){return 2===n?r(!0):e===!0&&t(!1)})},f=function(){return new Promise(function(r,t){return 3===n?r(!0):e===!0&&t(!1)})},h=function(){return new Promise(function(r,t){return 4===n?r(!0):e===!0&&t(!1)})},d=function(){return new Promise(function(r,t){return 5===n?r(!0):e===!0&&t(!1)})},m=function(){return new Promise(function(r,t){return 6===n?r(!0):e===!0&&t(!1)})},y=function(r){return new Promise(function(t,a){try{if(!Array.isArray(r))throw o.isNotArray;var s=i.__dayOfTheWeekStringToNumber(r);return i.__contains(s,n)?t(!0):e===!0&&a(!1)}catch(r){return void console.error(r)}})},w=function(){return new Promise(function(r,t){var o=[1,2,3,4,5];return i.__contains(o,n)?r(!0):e===!0&&t(!1)})},l=function(){return new Promise(function(r,t){var o=[0,6];return i.__contains(o,n)?r(!0):e===!0&&t(!1)})},g=function(r){return new Promise(function(t,n){try{if(!r.match(a.date))throw o.date;return r==i.__dateString()?t(!0):e===!0&&n(!1)}catch(r){return void console.error(r)}})},_=function(r,n){return new Promise(function(a,s){var u=new Date(r),c=new Date(n);try{if(u>c)throw o.dateGrater;if(u==c)throw o.dateSameDay;return i.__dateCompare(u,c,t)?a(!0):e===!0&&s(!1)}catch(r){return void console.error(r)}})},p=function(r){return new Promise(function(n,a){try{if(!Array.isArray(r))throw o.isNotArray;return i.__contains(r,t.toISOString().slice(0,10))?n(!0):e===!0&&a(!1)}catch(r){return void console.error(r)}})},v={Sunday:s,Monday:u,Tuesday:c,Wednesday:f,Thursday:h,Friday:d,Saturday:m,Selects:y,Weekdays:w,Weekend:l,Annual:g,DatesBetween:_,DatesContain:p};return v},r.prototype.at=function(r){var e=r,t=this.D,n=(this.D.getDay(),this.D.getHours()),o=this.messages(),i=this.helpers(),a=this.formats(),s=function(r,n){return new Promise(function(s,u){try{if(!r.match(a.time))throw o.time+"at start";if(!n.match(a.time))throw o.time+" at end";var c=t<i.__timeObject(n)&&t>i.__timeObject(r);return c?s(!0):e===!0&&u(!1)}catch(r){return void console.error(r)}})},u=function(r,n){return new Promise(function(s,u){try{if(!r.match(a.time))throw o.time+"at start";if(!n.match(a.time))throw o.time+" at end";var c=t<i.__timeObject(n)&&t>i.__timeObject(r);return c?e===!0&&u(!1):s(!0)}catch(r){return void console.error(r)}})},c=function(r){return new Promise(function(t,i){var a=parseInt(r);try{if(a>23)throw o.startHour;return a===n?t(!0):e===!0&&i(!1)}catch(r){return void console.error(r)}})},f=function(r,t){return new Promise(function(a,s){var u=parseInt(r),c=parseInt(t);try{if(u>23)throw o.startHour;if(c>23)throw o.endHour;var f=i.__range(c,c-u);return f.push(r),i.__contains(f,n)?a(!0):e===!0&&s(!1)}catch(r){return void console.error(r)}})},h=function(r,t){return new Promise(function(t,a){try{if(!Array.isArray(r))throw o.isNotArray;if(1!=!r.some(isNaN))throw o.hourFormat;var s=r.map(function(r){return parseInt(r)});return s.map(function(r){if(r>23)throw o.isNotValidHour}),i.__contains(s,n)?t(!0):e===!0&&a(!1)}catch(r){return void console.error(r)}})},d={Between:s,Unless:u,Hour:c,HoursBetween:f,HourSelects:h};return d},r.prototype.in=function(r){var e=r,t=this.messages(),n=this.helpers(),o=this.formats(),i=(this.D,this.D.getDate()),a=this.D.getMonth()+1,s=this.D.getFullYear(),u=function(r){return new Promise(function(t,n){try{if(parseInt(r)>31)throw __msg.day;return r==i?t(!0):e===!0&&n(!1)}catch(r){return void console.error(r)}})},c=function(r){return new Promise(function(o,a){try{if(!Array.isArray(r))throw t.isNotArray;var s=r.map(function(r){return parseInt(r)});return n.__contains(s,i)?o(!0):e===!0&&a(!1)}catch(r){return void console.error(r)}})},f=function(r,o){return new Promise(function(a,s){try{var u=parseInt(r),c=parseInt(o);if(u>30)throw t.startDay;if(c>31)throw t.endDay;var f=n.__range(c,c-u);return f.push(r),n.__contains(f,i)?a(!0):e===!0&&s(!1)}catch(r){return void console.error(r)}})},h=function(r){return new Promise(function(n,o){try{if(parseInt(r)>12)throw t.month;var i=r<10?"0"+r:r;return i==a?n(!0):e===!0&&o(!1)}catch(r){return void console.error(r)}})},d=function(r){return new Promise(function(o,i){try{if(!Array.isArray(r))throw t.isNotArray;return n.__contains(r,a)?o(!0):e===!0&&i(!1)}catch(r){return void console.error(r)}})},m=function(r){return new Promise(function(n,i){try{if(!r.toString().match(o.year))throw t.year;return r==s?n(!0):e===!0&&i(!1)}catch(r){return void console.error(r)}})},y={Day:u,Days:c,DaysBetween:f,Month:h,MonthSelects:d,Year:m};return y},r.prototype.is=function(r){var e=r,t=this.helpers(),n=this.messages(),o=function(r){return new Promise(function(t,n){return r?t(!0):e===!0&&n(!1)})},i=function(r){return new Promise(function(t,n){return r?e===!0&&n(!1):t(!0)})},a=function(r){return new Promise(function(n,o){try{if("undefined"==typeof window)throw this.messages("Language").onlyBrowser;return r.toLowerCase()==t.__detectLang()?n(!0):e===!0&&o(!1)}catch(r){return void console.error(r)}})},s=function(r){return new Promise(function(n,o){try{if("undefined"==typeof window)throw this.messages("Language").onlyBrowser;var i=t.__detectLang();return r.toLowerCase()==i.slice(0,2)?n(!0):e===!0&&o(!1)}catch(r){return void console.error(r)}})},u=function(r){return new Promise(function(o,i){try{if("undefined"==typeof window)throw this.messages("LanguageSelects").onlyBrowser;if(!Array.isArray(r))throw n.isNotArray;return t.__contains(t.__arrayToLower(r),t.__detectLang())?o(!0):e===!0&&i(!1)}catch(r){return void console.error(r)}})},c=function(r){return new Promise(function(o,i){try{if("undefined"==typeof window)throw this.messages("LangSelects").onlyBrowser;if(!Array.isArray(r))throw n.isNotArray;var a=t.__detectLang();return t.__contains(t.__arrayToLower(r),a.slice(0,2))?o(!0):e===!0&&i(!1)}catch(r){return void console.error(r)}})},f=function(r){return new Promise(function(o,i){try{if("undefined"==typeof window)throw this.messages("LanguageExcepts").onlyBrowser;if(!Array.isArray(r))throw n.isNotArray;return t.__contains(t.__arrayToLower(r),t.__detectLang())?e===!0&&i(!1):o(!0)}catch(r){return void console.error(r)}})},h=function(r){return new Promise(function(o,i){try{if("undefined"==typeof window)throw this.messages("LangExcepts").onlyBrowser;if(!Array.isArray(r))throw n.isNotArray;var a=t.__detectLang();return t.__contains(t.__arrayToLower(r),a.slice(0,2))?e===!0&&i(!1):o(!0)}catch(r){return void console.error(r)}})},d=function(){return new Promise(function(r,n){try{if("undefined"==typeof window)throw this.messages("Mobile").onlyBrowser;for(var o=navigator.userAgent,i=["Windows Phone","iPad","iPhone","iPod","Android"],a=[],s=0;s<i.length;s++)a.push(t.__str_includes(o,i[s]));return a.indexOf(!0)!=-1?r(!0):e===!0&&n(!1)}catch(r){return void console.error(r)}})},m={True:o,False:i,Language:a,Lang:s,LanguageSelects:u,LangSelects:c,LanguageExcepts:f,LangExcepts:h,Mobile:d};return m},r.prototype.timer=function(){var r=this.messages(),e=this.helpers(),t=function(t,n,o){return new Promise(function(i){var a=e.__typeToMilliseconds(t),s=typeof o;try{if(!a)throw r.timeFormat;if(isNaN(n))throw r.numFormat;if(0===n||"0"===n)throw r.numFormat;if(!e.__contains(["object","function","undefined"],s))throw this.messages("type").taskFormat;if("object"===s){if(!("before"in o))throw this.messages("key:before").notExist;if("function"!=typeof o.before)throw this.messages("before").shouldBeFunction;return o.before(),setTimeout(function(){return i(!0)},n*a)}return setTimeout(function(){return i(!0)},n*a)}catch(r){return void console.error(r)}})},n={After:t};return n},r});